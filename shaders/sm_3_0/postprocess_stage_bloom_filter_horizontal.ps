//////////////////////////////////////////////////////////////////////////////////////////
// Created: 21.12.2023
// Author: Deathman
// Nocturning studion for NS Project X
//////////////////////////////////////////////////////////////////////////////////////////
#include "common.h"
#include "filters.h"
//////////////////////////////////////////////////////////////////////////////////////////
#if BLOOM_QUALITY == UNDEFINED_QUALITY
#define BLOOM_SAMPLES_COUNT 2
#elif BLOOM_QUALITY == LOW_QUALITY
#define BLOOM_SAMPLES_COUNT 2
#elif BLOOM_QUALITY == MIDDLE_QUALITY
#define BLOOM_SAMPLES_COUNT 4
#elif BLOOM_QUALITY == HIGHT_QUALITY
#define BLOOM_SAMPLES_COUNT 4
#elif BLOOM_QUALITY == ULTRA_QUALITY
#define BLOOM_SAMPLES_COUNT 6
#endif
//////////////////////////////////////////////////////////////////////////////////////////
uniform float4 bloom_resolution;
//////////////////////////////////////////////////////////////////////////////////////////
float4 main (float2 TexCoords: TEXCOORD0): COLOR0
{
    float4 output = NULL;

    for (int i = -BLOOM_SAMPLES_COUNT / 2; i < BLOOM_SAMPLES_COUNT / 2; i++)
    {
        float4 sample = tex2Dlod0 (s_bloom, TexCoords + bloom_resolution.zw * float2 (i, 0));
        output += sample;
    }
    return output / BLOOM_SAMPLES_COUNT;
}
//////////////////////////////////////////////////////////////////////////////////////////
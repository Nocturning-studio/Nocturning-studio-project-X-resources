//////////////////////////////////////////////////////////////////////////////////////////
//	Created		: 17.12.2023
// Upscale function by
//https://www.shadertoy.com/view/sdy3WD
//////////////////////////////////////////////////////////////////////////////////////////
#include "common.h"
//////////////////////////////////////////////////////////////////////////////////////////
float dist(float4 a, float4 b)
{
    return abs((a.r + a.g + a.b) - (b.r + b.g + b.b)) / 3.0;
}
//////////////////////////////////////////////////////////////////////////////////////////
float4 tex2Dvcus(sampler2D s, float2 uv)
{
    float2 iuv = floor(uv * screen_res.xy - 0.5) + 0.5;

    float4 col = tex2D(s, uv);
    float4 col0 = float4(1.0, 1.0, 1.0, 1.0);
    for (int x = 0; x <= 1; x++)
    {
        for (int y = 0; y <= 1; y++)
        {
            float4 coln = tex2Dlod0(s, (iuv + float2(x, y)) / screen_res.xy);
            if (dist(col, col0) > dist(col, coln))
                col0 = coln;
        }
    }
    return col0;
}
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////
#include "common.h"
//////////////////////////////////////////////////////////////////////////////////////////
struct v2p
{
        vector4 factor: COLOR0;
        vector3 tc0: TEXCOORD0;
        vector3 tc1: TEXCOORD1;
};
//////////////////////////////////////////////////////////////////////////////////////////
uniform samplerCUBE s_sky0: register(s0);
uniform samplerCUBE s_sky1: register(s1);
//////////////////////////////////////////////////////////////////////////////////////////
// Pixel
vector4 main (v2p I): COLOR0
{
    vector3 s0 = texCUBE (s_sky0, I.tc0);
    vector3 s1 = texCUBE (s_sky1, I.tc1);
    vector3 sky = lerp (s0, s1, I.factor.w);
    sky = lerp (sky, fog_color, fog_sky_influence);
    
    return vector4 (sky, 0.0h);
}
//////////////////////////////////////////////////////////////////////////////////////////
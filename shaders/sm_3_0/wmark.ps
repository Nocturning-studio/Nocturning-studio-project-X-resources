//////////////////////////////////////////////////////////////////////////////////////////
#include "common.h"
#include "shared\fog.h"
//////////////////////////////////////////////////////////////////////////////////////////
float4 main (float2 UV: TEXCOORD0): COLOR0
{
    float4 WallmarkColor = tex2D (s_base, UV);
    
    // Deathman - считаем туман второй раз, но теперь специально для этого конкретного объекта
    float3 PositionBuffer = tex2D (s_gbuffer_position, UV);
	ApplyPixelFogness(WallmarkColor.rgb, WallmarkColor.a, PositionBuffer);
    
    return WallmarkColor;
}
//////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////
// Created: 26.10.2024
// Author: Deathman
// Nocturning studion for NS Project X
//////////////////////////////////////////////////////////////////////////////////////////
uniform float4 bloom_resolution;
uniform float2 bloom_parameters;
//////////////////////////////////////////////////////////////////////////////////////////
uniform sampler2D s_bloom;
uniform sampler2D s_bloom_blades;
//////////////////////////////////////////////////////////////////////////////////////////
// Unreal Engine 3 inspired code
//////////////////////////////////////////////////////////////////////////////////////////
float GetLuminance(float3 Color)
{
    return max(max(Color.r, Color.g), Color.b);
}
//////////////////////////////////////////////////////////////////////////////////////////
float GetBloomAmount(float3 Color)
{
    float Theshold = bloom_parameters.x;
    
    float Brightness = bloom_parameters.y;
    
    float Luminance = GetLuminance(Color) - Theshold;
    Luminance = saturate(Luminance);
    
    return Luminance * Brightness;
}

float GetBladesAmount(float3 Color)
{
    float Theshold = 0.9f;
    
    float Brightness = 3.0f;
    
    float Luminance = GetLuminance(Color) - Theshold;
    Luminance = saturate(Luminance);
    
    return Luminance * Brightness;
}
//////////////////////////////////////////////////////////////////////////////////////////
